<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ski Journal</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --ink: #1a1c2e;
    --snow: #f0f3f7;
    --ice: #dde5ef;
    --blue: #1e5fa3;
    --blue-light: #5b8ec4;
    --accent: #e05c2a;
    --green: #2e8b57;
    --muted: #7a8499;
    --card: #ffffff;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--snow);
    color: var(--ink);
    font-family: 'DM Sans', sans-serif;
    min-height: 100vh;
    overflow-x: hidden;
  }

  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image:
      repeating-linear-gradient(-35deg, transparent, transparent 70px, rgba(30,95,163,0.035) 70px, rgba(30,95,163,0.035) 71px),
      repeating-linear-gradient(55deg, transparent, transparent 90px, rgba(30,95,163,0.025) 90px, rgba(30,95,163,0.025) 91px);
    pointer-events: none;
    z-index: 0;
  }

  header {
    position: relative;
    z-index: 1;
    padding: 56px 40px 36px;
    border-bottom: 1px solid var(--ice);
    background: linear-gradient(180deg, rgba(30,95,163,0.07) 0%, transparent 100%);
  }

  .header-inner {
    max-width: 980px;
    margin: 0 auto;
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
    gap: 24px;
    flex-wrap: wrap;
  }

  .tagline {
    font-size: 11px;
    font-weight: 500;
    letter-spacing: 3px;
    text-transform: uppercase;
    color: var(--blue);
    margin-bottom: 10px;
  }

  h1 {
    font-family: 'Playfair Display', serif;
    font-size: clamp(40px, 5.5vw, 68px);
    font-weight: 700;
    line-height: 1.05;
    letter-spacing: -1px;
  }

  h1 em { color: var(--blue); font-style: italic; }

  .header-stats {
    display: flex;
    gap: 16px;
    flex-wrap: wrap;
    padding-bottom: 4px;
  }

  .stat {
    text-align: center;
    background: white;
    border: 1px solid var(--ice);
    border-radius: 10px;
    padding: 12px 20px;
    min-width: 76px;
  }

  .stat-num {
    font-family: 'Playfair Display', serif;
    font-size: 28px;
    font-weight: 700;
    color: var(--blue);
    line-height: 1;
  }

  .stat-label {
    font-size: 10px;
    font-weight: 500;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    color: var(--muted);
    margin-top: 4px;
  }

  .drag-hint {
    position: relative;
    z-index: 1;
    max-width: 980px;
    margin: 14px auto 0;
    padding: 0 40px;
    font-size: 11.5px;
    color: var(--muted);
  }

  main, .resort-grid {
    position: relative;
    z-index: 1;
    max-width: 980px;
    margin: 0 auto;
    padding: 28px 40px 100px;
    display: grid;
    grid-template-columns: 1fr;
    gap: 20px;
    align-items: start;
  }

  .resort {
    background: var(--card);
    border: 1px solid var(--ice);
    border-radius: 12px;
    overflow: hidden;
    transition: box-shadow 0.2s ease, transform 0.2s ease;
    animation: fadeUp 0.5s ease both;
  }

  .resort:hover { box-shadow: 0 8px 28px rgba(30,95,163,0.11); transform: translateY(-2px); }
  .resort.new-resort { animation: fadeUp 0.4s ease both; }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(18px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .resort:nth-child(1)  { animation-delay: 0.04s; }
  .resort:nth-child(2)  { animation-delay: 0.08s; }
  .resort:nth-child(3)  { animation-delay: 0.12s; }
  .resort:nth-child(4)  { animation-delay: 0.16s; }
  .resort:nth-child(5)  { animation-delay: 0.20s; }
  .resort:nth-child(6)  { animation-delay: 0.24s; }
  .resort:nth-child(7)  { animation-delay: 0.28s; }
  .resort:nth-child(8)  { animation-delay: 0.32s; }
  .resort:nth-child(9)  { animation-delay: 0.36s; }
  .resort:nth-child(10) { animation-delay: 0.40s; }

  .resort-header {
    position: relative;
    padding: 22px 24px 16px;
    border-bottom: 1px solid var(--ice);
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 12px;
  }

  .resort-name {
    font-family: 'Playfair Display', serif;
    font-size: 21px;
    font-weight: 700;
    line-height: 1.2;
  }

  .resort-meta {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 6px;
    flex-shrink: 0;
  }

  .visit-count {
    font-size: 11px;
    font-weight: 500;
    color: var(--muted);
    letter-spacing: 0.5px;
    white-space: nowrap;
  }

  .badge {
    font-size: 10px;
    font-weight: 600;
    letter-spacing: 0.8px;
    text-transform: uppercase;
    padding: 3px 8px;
    border-radius: 10px;
    white-space: nowrap;
  }

  .badge-yes   { background: rgba(46,139,87,0.1);  color: var(--green); }
  .badge-no    { background: rgba(224,92,42,0.1);  color: var(--accent); }
  .badge-maybe { background: rgba(30,95,163,0.1);  color: var(--blue); }

  .visits { padding: 4px 24px 0; }

  .visit {
    padding: 16px 0;
    border-bottom: 1px solid var(--ice);
  }

  .visit:last-child { border-bottom: none; }

  .visit-date {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-size: 10.5px;
    font-weight: 500;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    color: var(--blue);
    margin-bottom: 8px;
  }

  .visit-date::before {
    content: '';
    display: block;
    width: 12px;
    height: 1px;
    background: var(--blue-light);
  }

  .notes { display: flex; flex-direction: column; gap: 5px; }

  .note {
    font-size: 13.5px;
    line-height: 1.6;
    color: #404560;
    padding-left: 12px;
    border-left: 2px solid var(--ice);
  }

  .note.hl   { border-left-color: var(--blue-light); color: var(--ink); }
  .note.good { border-left-color: var(--green); color: var(--green); }
  .note.bad  { border-left-color: var(--accent); color: var(--accent); }

  .rank-num {
    font-family: 'Playfair Display', serif;
    font-size: 12px;
    font-weight: 700;
    color: white;
    background: var(--ink);
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    transition: background 0.2s;
  }

  .resort-name-row {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  /* Card actions */

  .add-visit-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    padding: 8px 12px;
    font-size: 12px;
    font-weight: 500;
    font-family: 'DM Sans', sans-serif;
    color: var(--blue);
    background: rgba(30,95,163,0.05);
    border: 1px dashed rgba(30,95,163,0.3);
    border-radius: 8px;
    cursor: pointer;
    flex: 1;
    transition: all 0.15s ease;
  }
  .add-visit-btn:hover { background: rgba(30,95,163,0.1); border-color: var(--blue); }

  .edit-resort-btn {
    position: absolute;
    top: 14px;
    right: 14px;
    background: none;
    border: none;
    color: var(--muted);
    font-size: 13px;
    cursor: pointer;
    padding: 4px 8px;
    border-radius: 6px;
    opacity: 0;
    transition: opacity 0.15s, background 0.15s, color 0.15s;
  }
  .resort:hover .edit-resort-btn { opacity: 1; }
  .edit-resort-btn:hover { background: var(--ice); color: var(--ink); }

  .edit-visit-btn {
    background: none;
    border: none;
    color: var(--muted);
    font-size: 11px;
    cursor: pointer;
    padding: 2px 6px;
    border-radius: 4px;
    opacity: 0;
    transition: opacity 0.15s, background 0.15s;
    flex-shrink: 0;
  }
  .visit:hover .edit-visit-btn { opacity: 1; }
  .edit-visit-btn:hover { background: var(--ice); color: var(--ink); }

  .visit-date-row {
    display: flex;
    align-items: center;
    gap: 6px;
  }


  /* FABs */
  .fab-group {
    position: fixed;
    bottom: 32px;
    right: 32px;
    z-index: 100;
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 10px;
  }

  .fab {
    display: flex;
    align-items: center;
    gap: 8px;
    color: white;
    border: none;
    border-radius: 28px;
    padding: 14px 22px;
    font-size: 13px;
    font-weight: 600;
    font-family: 'DM Sans', sans-serif;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .fab-primary {
    background: var(--blue);
    box-shadow: 0 4px 20px rgba(30,95,163,0.4);
  }
  .fab-primary:hover { background: #1a4f8a; transform: translateY(-2px); box-shadow: 0 6px 28px rgba(30,95,163,0.5); }

  .fab-secondary {
    background: var(--ink);
    box-shadow: 0 4px 16px rgba(26,28,46,0.25);
    font-size: 12px;
    padding: 10px 18px;
  }
  .fab-secondary:hover { background: #2e3050; transform: translateY(-2px); }

  /* Modal */
  .modal-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(20,22,40,0.5);
    backdrop-filter: blur(4px);
    z-index: 200;
    align-items: center;
    justify-content: center;
    padding: 20px;
  }
  .modal-overlay.open { display: flex; }

  .modal {
    background: white;
    border-radius: 16px;
    width: 100%;
    max-width: 480px;
    box-shadow: 0 20px 60px rgba(20,22,40,0.2);
    animation: modalIn 0.2s ease;
  }

  @keyframes modalIn {
    from { opacity: 0; transform: translateY(14px) scale(0.98); }
    to   { opacity: 1; transform: translateY(0) scale(1); }
  }

  .modal-header {
    padding: 24px 28px 16px;
    border-bottom: 1px solid var(--ice);
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .modal-title {
    font-family: 'Playfair Display', serif;
    font-size: 20px;
    font-weight: 700;
  }

  .modal-subtitle {
    font-size: 12px;
    color: var(--muted);
    margin-top: 2px;
  }

  .modal-close {
    background: none;
    border: none;
    font-size: 22px;
    color: var(--muted);
    cursor: pointer;
    padding: 2px 8px;
    border-radius: 6px;
    line-height: 1;
    transition: background 0.15s;
  }
  .modal-close:hover { background: var(--snow); color: var(--ink); }

  .modal-body { padding: 20px 28px 8px; display: flex; flex-direction: column; gap: 14px; }

  .field-group { display: flex; flex-direction: column; }

  .field-label {
    font-size: 11px;
    font-weight: 600;
    letter-spacing: 1px;
    text-transform: uppercase;
    color: var(--muted);
    margin-bottom: 5px;
  }

  .field-input, .field-textarea, .field-select {
    width: 100%;
    font-family: 'DM Sans', sans-serif;
    font-size: 14px;
    color: var(--ink);
    background: var(--snow);
    border: 1px solid var(--ice);
    border-radius: 8px;
    padding: 9px 12px;
    outline: none;
    transition: border-color 0.15s;
    resize: vertical;
  }
  .field-input:focus, .field-textarea:focus, .field-select:focus { border-color: var(--blue); background: white; }
  .field-textarea { min-height: 100px; }

  .field-hint {
    font-size: 11px;
    color: var(--muted);
    margin-top: 4px;
  }

  .modal-footer {
    padding: 16px 28px 24px;
    display: flex;
    gap: 10px;
    justify-content: flex-end;
  }

  .btn-cancel {
    background: none;
    border: 1px solid var(--ice);
    border-radius: 8px;
    padding: 9px 18px;
    font-family: 'DM Sans', sans-serif;
    font-size: 13px;
    font-weight: 500;
    color: var(--muted);
    cursor: pointer;
    transition: all 0.15s;
  }
  .btn-cancel:hover { border-color: var(--muted); color: var(--ink); }

  .btn-save {
    background: var(--blue);
    border: none;
    border-radius: 8px;
    padding: 9px 20px;
    font-family: 'DM Sans', sans-serif;
    font-size: 13px;
    font-weight: 600;
    color: white;
    cursor: pointer;
    transition: background 0.15s;
  }
  .btn-save:hover { background: #1a4f8a; }

  footer {
    position: relative;
    z-index: 1;
    text-align: center;
    padding: 28px;
    font-size: 12px;
    color: var(--muted);
    letter-spacing: 1px;
    border-top: 1px solid var(--ice);
  }

  @media (max-width: 640px) {
    header { padding: 36px 20px 28px; }
    main, .resort-grid { padding: 24px 16px 100px; grid-template-columns: 1fr; }
    .resort-header { padding: 18px 18px 14px; }
    .visits { padding: 4px 18px 0; }
    .card-actions { margin: 8px 18px 14px; }
    .drag-hint { padding: 0 20px; }
    .fab-group { bottom: 20px; right: 20px; }
    .fab { padding: 12px 18px; }
  }

  /* ── Tabs ── */
  .tabs-bar {
    position: relative;
    z-index: 1;
    max-width: 980px;
    margin: 0 auto;
    padding: 0 40px;
    display: flex;
    gap: 4px;
    border-bottom: 2px solid var(--ice);
    margin-top: 24px;
  }

  .tab-btn {
    font-family: 'DM Sans', sans-serif;
    font-size: 13px;
    font-weight: 500;
    color: var(--muted);
    background: none;
    border: none;
    padding: 12px 20px;
    cursor: pointer;
    border-bottom: 2px solid transparent;
    margin-bottom: -2px;
    transition: color 0.15s, border-color 0.15s;
    white-space: nowrap;
  }
  .tab-btn:hover { color: var(--ink); }
  .tab-btn.active { color: var(--blue); border-bottom-color: var(--blue); font-weight: 600; }

  .tab-panel { display: none; }
  .tab-panel.active { display: block; }

  .tab-stats {
    position: relative;
    z-index: 1;
    max-width: 980px;
    margin: 0 auto;
    padding: 10px 40px 0;
    display: flex;
    gap: 16px;
    align-items: center;
  }

  .tab-stat {
    font-size: 12px;
    color: var(--muted);
    display: flex;
    align-items: center;
    gap: 5px;
  }

  .tab-stat-num {
    font-family: 'Playfair Display', serif;
    font-size: 14px;
    font-weight: 700;
    color: var(--blue);
  }

  .tab-stat-sep {
    color: var(--ice);
    font-size: 14px;
  }
</style>
</head>
<body>

<header>
  <div class="header-inner">
    <div>
      <h1>Ski Resort <em>Rankings</em></h1>
    </div>
    <div class="header-stats">
      <div class="stat"><div class="stat-num" id="resort-count">—</div><div class="stat-label">Resorts</div></div>
      <div class="stat"><div class="stat-num" id="days-count">—</div><div class="stat-label">Days</div></div>
    </div>
  </div>
</header>

<div class="tabs-bar">
  <button class="tab-btn active" data-tab="east">East Coast</button>
  <button class="tab-btn" data-tab="midwest">Midwest</button>
  <button class="tab-btn" data-tab="west">West Coast</button>
</div>


<div class="tab-stats">
  <div class="tab-stat"><span class="tab-stat-num" id="tab-resort-count">—</span> resorts on this list</div>
</div>

<div id="tab-east" class="tab-panel active">
<main id="resort-grid-east" class="resort-grid">
<div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Saddleback Mountain</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · March 2025</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Pretty cold but bluebird and sunny. Awesome flowy groomers with great snow.</div>
        <div class="note">Trees were great even though the snow was a little crusty and skied out.</div>
        <div class="note">Views from the top were amazing. Lifts were new and modern. Lodge was nice.</div>
        <div class="note">Almost nobody there.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Sugarloaf</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · March 2025</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Good conditions but could have used some fresh snow. Coverage was decent.</div>
        <div class="note">Trees were kinda hard to find but good once located — snow was skied out though.</div>
        <div class="note">Surprising amount of groomers and lack of bump runs.</div>
        <div class="note">Overall mountain was steeper and bigger than expected.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="no" data-visits="3">
    <div class="resort-header">
      <div class="resort-name">Jay Peak</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta">
        <div class="visit-count">3 visits</div>
        <span class="badge badge-no">Wind jinx</span>
      </div>
    </div>
    <div class="visits">
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">1 Day · January 2021</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">Great conditions but windy. Large portion on wind hold. Tram was closed.</div>
        </div>
      </div>
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">1 Day · March 2025</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">Very cold, very windy. Only Beinvene quad open on upper mountain.</div>
          <div class="note">Snow was really good. Glades were the only escape from the wind.</div>
          <div class="note bad">Probably won't go back soon — wind hold both times.</div>
        </div>
      </div>
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">1 Day · February 2026</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">Whole mountain totally open. Few days after a big storm.</div>
          <div class="note">Crusty on groomers, good in the trees. Tram open but line too long all day.</div>
        </div>
      </div>
    </div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="maybe" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Mount Sunapee</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta">
        <div class="visit-count">1 visit</div>
        <span class="badge badge-maybe">If convenient</span>
      </div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · January 2021</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Beautiful bluebird day with wonderful groomers. Mellow glade runs.</div>
        <div class="note">If Nora and Tyler were to create their own ski resort, this would be it.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Stowe Mountain</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta">
        <div class="visit-count">1 visit</div>
        <span class="badge badge-yes">✓ Return</span>
      </div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · January 2021</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Nice day with good conditions. Long runs off almost all chairlifts. Good tree runs.</div>
        <div class="note">Very long lift lines at the main express quad and gondola.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Titus Mountain</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · January 2026</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Great conditions but cold. Saturday with no crowds — found plenty of fresh snow a week after a storm.</div>
        <div class="note">Culverts were interesting, bridge was fun. Good grooming and good trees.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Whiteface</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · February 2026</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Mountain has a hell of a presence. Chilly to start but a beautiful bluebird day. Almost no crowds.</div>
        <div class="note">Mountain mostly open except area with downhill training going on.</div>
        <div class="note">Snow very crusty on groomers, a bit thin in the trees. Very steep at upper mountain.</div>
        <div class="note good">Nora skied her first Olympic downhill trail.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="2">
    <div class="resort-header">
      <div class="resort-name">Killington</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta">
        <div class="visit-count">2 visits</div>
        <span class="badge badge-yes">✓ Return</span>
      </div>
    </div>
    <div class="visits">
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">2 Days · 2019</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">Rainy warm conditions. 75% of mountain open.</div>
        </div>
      </div>
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">2 Days · November 2023</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">Early season conditions but decent coverage. Attended women's GS and Slalom FIS race.</div>
          <div class="note good">Watched Mikaela win her 90th race. Was a ton of fun. Will go back again.</div>
        </div>
      </div>
    </div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Gore Mountain</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · February 2026</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Place is huge. Main front side lifts are really long. Whole mountain open.</div>
        <div class="note">Skied all groomers since most trees were closed or thin — looked like they'd be great with more snow.</div>
        <div class="note">Cold but not frigid. Snow pretty good, a little crusty. Very few people.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Sunday River</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · March 2025</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Started dry then steady light rain. Coverage ok, snow soft and springlike.</div>
        <div class="note">Bubble chairs made a huge difference in the rain. Jordan 8 broke down for ~20 mins.</div>
        <div class="note">Tree and bump runs were pretty solid. Smelled like poo in a few spots.</div>
        <div class="note">Cool place with a fun layout.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Okemo</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta">
        <div class="visit-count">1 visit</div>
        <span class="badge badge-yes">✓ Return</span>
      </div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · January 2021</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Crusty snow but a nice day overall. Only skied groomers because of conditions.</div>
        <div class="note">Decent looking trees we didn't get to explore.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="no" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Cannon Mountain</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta">
        <div class="visit-count">1 visit</div>
        <span class="badge badge-no">Probably not</span>
      </div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · January 2021</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Good conditions. Super local mountain vibe.</div>
        <div class="note bad">TERRIBLE layout.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="no" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Bolton Valley</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta">
        <div class="visit-count">1 visit</div>
        <span class="badge badge-no">Probably not</span>
      </div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · January 2021</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Good conditions.</div>
        <div class="note bad">SUPER slow lifts. A lot of flat traversing areas.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="no" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Mount Snow</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta">
        <div class="visit-count">1 visit</div>
        <span class="badge badge-no">Won't return</span>
      </div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · January 2021</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Great weather and decent snow but super crowded. Several lifts broke or unused.</div>
        <div class="note bad">Way too much uphill capacity making runs even more crowded. Lacked character and was pretty vanilla.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="maybe" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Greek Peak</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · March 2025</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Whole mountain open with decent coverage, but rained the day before so glades were washed out.</div>
        <div class="note">Good vibes and a spunky feel — could use money for a new lift and snowmaking.</div>
        <div class="note">Skis much bigger than the trail map leads on.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Stratton Mountain</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta">
        <div class="visit-count">1 visit</div>
        <span class="badge badge-yes">✓ For sure</span>
      </div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · November 2023</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Good early season snow but only ~5 trails open. Trails that were open were fun with good flow.</div>
        <div class="note">Nothing very steep — seemed pretty mellow.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Sugarbush</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta">
        <div class="visit-count">1 visit</div>
        <span class="badge badge-yes">100% return</span>
      </div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · 2019</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Really bad conditions. Rain and ice. Only 30% of mountain open.</div>
        <div class="note good">Would 100% go back to see the rest of the mountain.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="maybe" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Berkshire East</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · March 2025</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Rained all day — totally soaked by the end. Did night skiing.</div>
        <div class="note">Snow soft but by far the dirtiest we've ever skied. Wind blew a ton of debris out of the trees.</div>
        <div class="note">T-bar express is nice and facilities are well kept.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="maybe" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Catamount</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · March 2025</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Rained the day before and lightly the day of. Coverage very variable and quite icy.</div>
        <div class="note">Only one lift and a few trails open.</div>
        <div class="note">Really nice lodge, well-maintained lifts. Good vibe and layout.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Windham Mountain Club</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta">
        <div class="visit-count">1 visit</div>
        <span class="badge badge-yes">✓ Return</span>
      </div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · November 2023</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Opening day — two runs open, classic ribbon of death. Pretty icy and bumpy.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Hunter Mountain</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta">
        <div class="visit-count">1 visit</div>
        <span class="badge badge-yes">100% return</span>
      </div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · January 2021</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Terrible weather. Raining with most of the mountain on wind hold. Only skied a short morning.</div>
        <div class="note good">Would 100% go back to see the rest of the mountain.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="no" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Big Boulder</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta">
        <div class="visit-count">1 visit</div>
        <span class="badge badge-no">Probably not</span>
      </div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Smaller. Not much open. Very crowded.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>
</main>
</div>

<div id="tab-midwest" class="tab-panel">
<main id="resort-grid-midwest" class="resort-grid">
  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Mt Bohemia</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · January 2025</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Super cool, super rugged place. No grooming and almost all tree skiing.</div>
        <div class="note">Some of it can be gnarly but a lot is very approachable.</div>
        <div class="note good">Lots of super light fresh snow and nobody there. Lots of potato trees.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="2">
    <div class="resort-header">
      <div class="resort-name">Snowshoe</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">2 visits</div></div>
    </div>
    <div class="visits">
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">3 Days · 2019</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">First visit.</div>
        </div>
      </div>
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">1 Day · January 2024</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">Cold but good conditions. Not too crowded. Silver Creek section was great.</div>
        </div>
      </div>
    </div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Nubs Nob</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">3 Days</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Colored lifts and good vibes.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="2">
    <div class="resort-header">
      <div class="resort-name">Holiday Valley</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">2 visits</div></div>
    </div>
    <div class="visits">
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">3 Days · Previous visits</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">Multiple previous visits.</div>
        </div>
      </div>
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">1 Day · February 2026</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">First time with mountain totally open. Got a little snow the night before so trees were pretty good.</div>
        </div>
      </div>
    </div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="3">
    <div class="resort-header">
      <div class="resort-name">Canaan Valley</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">3 visits</div></div>
    </div>
    <div class="visits">
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">1 Day · February 2023</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">Good vertical and pretty big. Almost nobody there but only ~5 trails open. Very slow lift.</div>
        </div>
      </div>
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">1 Day · January 2024</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">Mostly open with lots of fresh snow. Some cool wooded runs and glades with real deep snow.</div>
          <div class="note">Still nobody there. Still slow lift.</div>
        </div>
      </div>
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">1 Day · February 2026</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">Very cold and windy Saturday. Everything was open. Got 6 inches of fresh snow.</div>
          <div class="note good">Trees were great. Very few people.</div>
          <div class="note bad">Still slow lifts.</div>
        </div>
      </div>
    </div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Marquette Mountain</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">2 Days · January 2025</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Super cold but almost totally empty both days. Showed up at noon and still had totally untracked groomers.</div>
        <div class="note good">Groomers were awesome. Skis and feels taller than it is.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Mt Ripley</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · January 2025</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Fresh powder and snowing while skiing. Skied a lap off the back side and got totally fresh untracked powder.</div>
        <div class="note">Kinda rolly poly fall lines with some flats. Ditch of doom. Cool city mountain.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="2">
    <div class="resort-header">
      <div class="resort-name">Caberfae Peaks</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">2 visits</div></div>
    </div>
    <div class="visits">
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">1 Day · January 2021</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">Pretty great terrain for the Midwest. Very mom and pop.</div>
        </div>
      </div>
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">1 Day · February 2024</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">Beautiful day, good groomers to start but got icy. Very nice little place. Not too crowded for a Saturday.</div>
          <div class="note bad">Could be a death trap if it was really crowded.</div>
        </div>
      </div>
    </div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Massanutten</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · December 2025</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Spring style skiing, warm and sunny. Coverage was actually quite good with most of the mountain open.</div>
        <div class="note">Place is really nice with great snowmaking and good lifts. Felt pretty big for only really having two lifts.</div>
        <div class="note bad">Jerry's everywhere, lift ops was bad.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="maybe" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Seven Springs</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">2 Days</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note bad">Terrible weather both times.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Timberline Mountain</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · January 2024</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">100% open, good groomer runs and a lot of vert. Really nice lift.</div>
        <div class="note bad">Super cold. A little crowded. Lift stopped all the time. Need to thin and clear glades.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Peek n Peak</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">4 Days</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">4 days total.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="2">
    <div class="resort-header">
      <div class="resort-name">Boyne Mountain</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">2 visits</div></div>
    </div>
    <div class="visits">
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">1 Day · First visit</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">Good conditions on a Monday.</div>
        </div>
      </div>
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">1 Day · February 2024</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">Only there for a Saturday afternoon. Not too crowded. Snow cover was thin.</div>
          <div class="note bad">Tried the new 8-pack — it's chaos to get on and is probably way too big.</div>
        </div>
      </div>
    </div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Kissing Bridge</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · January 2026</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Freezing cold Friday, snow was great, no one there.</div>
        <div class="note">Parts of the mountain had delayed openings. Lots of traversing. Old infrastructure. Easiest pass process ever.</div>
        <div class="note good">North side is the best area.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="maybe" data-visits="2">
    <div class="resort-header">
      <div class="resort-name">Wisp</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">2 visits</div></div>
    </div>
    <div class="visits">
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">1 Day · December 2025</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">Super cold and windy after a number of very warm days.</div>
          <div class="note bad">Snow guns everywhere, surface was icy or man-made glue. Only about half open. Got covered in ice head to toe.</div>
          <div class="note">Overall place seemed just ok. Could use some maintenance.</div>
        </div>
      </div>
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">1 Day · February 2026</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">Pretty cold but sunny. Totally open but front side closed for a race.</div>
          <div class="note">Snow was good. Not too crowded.</div>
        </div>
      </div>
    </div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="maybe" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Crystal Mountain</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">3 Days</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Really nice upkeep and resort facilities.</div>
        <div class="note">Terrain was pretty whatever.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="maybe" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Winterplace</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Good terrain gives it potential to be much higher on the list with better conditions.</div>
        <div class="note bad">Conditions were pretty rough. White ribbons of death everywhere. Absolute Jerry fest like we have never seen before.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="2">
    <div class="resort-header">
      <div class="resort-name">The Highlands</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">2 visits</div></div>
    </div>
    <div class="visits">
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">1 Day · First visit</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">Powder and very flat cat tracks.</div>
        </div>
      </div>
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">1 Day · February 2024</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">Spent an afternoon on a Sunday. Nobody there. Got some decent runs in but still has a lot of flat.</div>
          <div class="note good">New six pack is super nice — heated seats and bubble. Actually seems to be a good idea.</div>
        </div>
      </div>
    </div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Snow Trails</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">Many days · Season pass holder</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Best terrain in Ohio.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Norway Mountain</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · January 2025</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Very mom and pop, very friendly. Not totally open and very cold but snow was good.</div>
        <div class="note">Terrain was fun — has some good trails and some pretty steep groomers.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Mad River Mountain</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">3 Days</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">3 days total.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="maybe" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Hidden Valley</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Ok terrain. Little brother to Seven Springs.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Boston Mills</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">Too many to count · Home mountain</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Home 😊</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Pine Mountain</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Night · January 2025</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Really cold, and not totally open. Good length runs but not steep at all. Very mellow.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="no" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Mt. Brighton</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note bad">Similar to Ohio resorts. Trash dump ski hill, literally.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Brandywine</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">4 Days</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">4 days total.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Alpine Valley</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Tyler's favorite.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>
</main>
</div>

<div id="tab-west" class="tab-panel">
<main id="resort-grid-west" class="resort-grid">
  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Whistler</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">4 Days · January 2019</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Amazing terrain. So much to ski. Went with Lee and Chel.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="2">
    <div class="resort-header">
      <div class="resort-name">Big Sky</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">2 visits</div></div>
    </div>
    <div class="visits">
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">3 Days · February 2023</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">Got good snow first day. Crowds generally not too bad except some bad luck with lift issues.</div>
          <div class="note">Tons of different terrain. Massive place. Did not ride the tram.</div>
        </div>
      </div>
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">3 Days · February 2025</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">Rode new tram. Cool but visibility at the top was terrible.</div>
          <div class="note good">Had awesome snow the last day and skied a ton of trees. Great time.</div>
          <div class="note">Stayed one night on the mountain at the Huntley. It was good.</div>
        </div>
      </div>
    </div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Mammoth</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">2 Days · February 2022</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Overall good conditions. Mountain is amazing. So big for being one large peak but has a lot of smaller sub peaks around it.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Grand Targhee</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">2 Days · February 2023</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Best powder day ever. Mellow pitch, great layout, no people.</div>
        <div class="note good">New Colter lift helped this place a ton.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="4">
    <div class="resort-header">
      <div class="resort-name">Winter Park</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">4 visits</div></div>
    </div>
    <div class="visits">
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">2 Days · April 2019</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">Great snow, good diversity.</div>
        </div>
      </div>
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">3 Days · March 2020</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">Loved the place.</div>
        </div>
      </div>
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">1 Day · March 2024</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">Skied on a Sunday. Pretty crowded but lift lines were not a real issue. Snow crusty in the morning but softened up.</div>
          <div class="note bad">Grooming was very disappointing. Very little groomed, many runs still had pushed out crud from Saturday. Winter Park was previously #2 but this visit dropped it down.</div>
        </div>
      </div>
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">2 Days · April 2025</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note good">Got 10 inches of fresh powder on first day. Amazing skiing. Some of the best lines we've ever skied.</div>
        </div>
      </div>
    </div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Solitude</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · January 2020</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Powder day. Great terrain.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Snowbird</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · January 2020</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Cool tunnel.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="3">
    <div class="resort-header">
      <div class="resort-name">Copper Mountain</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">3 visits</div></div>
    </div>
    <div class="visits">
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">1 Day · March 2020</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">Better than expected! Conditions were great and Nora skied her first real double black.</div>
        </div>
      </div>
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">2 Days · December 2021</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">Early season but best conditions of the resorts we went to on this trip. First day a little crowded, second much less.</div>
        </div>
      </div>
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">1 Day · March 2024</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">Arrived mid-morning Friday after flying in. Conditions were great with a warm bluebird day. Skied most of the mountain.</div>
          <div class="note good">Copper bowl is a super fun area.</div>
        </div>
      </div>
    </div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Bridger Bowl</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · February 2023</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Way more family friendly than expected and had a great vibe. Nice bluebird day.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Sun Valley</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">2 Days · March 2022</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Icy conditions, stuck to groomers. 40k of vert both days, demoed Stöcklis.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Sunshine Banff</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">2 Days · March 2023</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">No new snow but good coverage and good quality snow. Not crowded.</div>
        <div class="note">Poutine was good.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Red Mountain Resort</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">2 Days · January 2024</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Temps were warm and snow was soft. Coverage wasn't the best but most everything open and skiable. Huge place with a lot of fun runs.</div>
        <div class="note">All lifts were pretty old fixed grips. The red chair was a wild old double chair with truss towers.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="2">
    <div class="resort-header">
      <div class="resort-name">Steamboat</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">2 visits</div></div>
    </div>
    <div class="visits">
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">1 Day · March 2020</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">Iffy conditions. Would go back.</div>
        </div>
      </div>
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">3 Days · April 2025</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">The week before was in the sixties. Pretty significant melt out. Got some snow while there and conditions were better than expected.</div>
          <div class="note good">So many good trees to be had.</div>
        </div>
      </div>
    </div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="2">
    <div class="resort-header">
      <div class="resort-name">Beavercreek</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">2 visits</div></div>
    </div>
    <div class="visits">
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">1 Day · January 2018</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">Freaking cookies. Technically her first black.</div>
        </div>
      </div>
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">1 Day · December 2021</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">Terrible conditions but FIS race which was fun.</div>
        </div>
      </div>
    </div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Jackson Hole</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">2 Days · February 2023</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Powder, amazing waffles, tracked out quickly. Tight and steep.</div>
        <div class="note bad">Tyler had technical difficulties.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Lake Louise</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">2 Days · March 2023</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Poor coverage in spots, icy grooms, west bowl closed but not crowded.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="3">
    <div class="resort-header">
      <div class="resort-name">A Basin</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">3 visits</div></div>
    </div>
    <div class="visits">
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">1 Day · December 2021</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">Good day but early season and only a few front side runs open.</div>
        </div>
      </div>
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">1 Day · May 2023</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">Great spring conditions. A lot was open but not everything. Kelli and Jacob post-wedding ski day.</div>
        </div>
      </div>
      <div class="visit">
        <div class="visit-date-row"><div class="visit-date">1 Day · March 2024</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">
          <div class="note hl">Finally got to ski the whole mountain. Pretty good conditions on most of the mountain.</div>
          <div class="note good">Some great bumps and trees.</div>
        </div>
      </div>
    </div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Heavenly</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · February 2022</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Friday, resort #50. Tyler would like to go back midweek.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Palisades Tahoe</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · February 2022</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Spring conditions, no new snow — didn't get to try a few areas.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Breckenridge</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · January 2018</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Nora's first day out west ever! Can be crowded.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Alta</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · January 2020</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Lots of traversing.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Kirkwood</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · February 2022</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Spring conditions. With Lee, Chel, Ben, Jeff.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Homewood</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · February 2022</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Best views ever. Spring conditions.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Loveland</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · May 2023</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Almost entirely open with very spring conditions. Cool independent vibe.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Alpine Meadows</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · February 2022</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Saturday, spring conditions.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Mission Ridge</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">2 Days · January 2024</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">First day rained almost the whole day. Still got to ski most of the mountain. Second day pretty clear but snow still very heavy.</div>
        <div class="note">Was with Lee and Chelsea. Saw an inbounds avalanche.</div>
        <div class="note">One cool bubble detachable from Europe. Rest of the lifts were super cool center post double chairs.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Park City</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · March 2022</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Only powder day of 21-22 season.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Schweitzer Mountain</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · February 2024</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Pretty warm weather leading to spring conditions. Around half the mountain open due to warm rainy weather.</div>
        <div class="note">Super nice lifts and good mountain layout.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Keystone</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">2 Days</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Great conditions first day. Second day was early season but still good conditions.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="maybe" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Vail</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">2 Days</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Second day was real bad. Very limited terrain open even though trail map seemed to say more was open.</div>
        <div class="note bad">Super crowded and poor coverage.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Deer Valley</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · January 2020</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Groomers for days.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Steven's Pass</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · January 2019</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Conditions were good. Decent resort, just kinda small.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Snowbasin</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · March 2022</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Variable conditions. Want to go back in good conditions.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Lookout Pass</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · February 2024</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Snow was very crusty off groomed but more groomed runs than expected. Front part very Midwest vibe but new Eagle Peak terrain was cool.</div>
        <div class="note">Small independent resort with decent vibe. All fixed grip lifts but seemed in good shape.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="maybe" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Northstar</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · February 2022</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Saturday crowds.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Snow King</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · February 2023</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Nice local ski hill. Steep AF on upper front face.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Granby Ranch</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · April 2025</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Only skied for a few hours but had awesome spring skiing conditions.</div>
        <div class="note">Place is relatively small but modern and nice. A surprising amount of real estate around it.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="yes" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Eldora</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Only a few runs open, didn't get to see the far side. Smaller but has a good vibe.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="maybe" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Brighton</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · January 2020</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Pretty meh.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="no" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">Silver Mountain</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · February 2024</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">Coverage was bad and only about a third of the mountain open. Lots of rocks, trees and junk to run over.</div>
        <div class="note">Gondola from Kellogg up to the mountain was cool but rest of the lifts were old fixed grips.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>

  <div class="resort" data-return="no" data-visits="1">
    <div class="resort-header">
      <div class="resort-name">49 Degrees North</div>
      <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta"><div class="visit-count">1 visit</div></div>
    </div>
    <div class="visits"><div class="visit">
      <div class="visit-date-row"><div class="visit-date">1 Day · January 2024</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
      <div class="notes">
        <div class="note hl">They did not groom a single run the night before. Everything was frozen over crust and almost unskiable.</div>
        <div class="note bad">Skied 4 runs and left. Mountain seemed like it could have been pretty cool if conditions weren't so awful.</div>
      </div>
    </div></div>
    <button class="add-visit-btn">＋ Add visit</button>
  </div>
</main>
</div>

<footer>❄ &nbsp; Ski Resort Rankings</footer>

<!-- FABs -->
<div class="fab-group">
  <button class="fab fab-secondary" id="export-btn">↓ Export</button>
  <button class="fab fab-primary" id="new-resort-btn">＋ New Resort</button>
</div>

<!-- Add Visit Modal -->
<div class="modal-overlay" id="visit-modal">
  <div class="modal">
    <div class="modal-header">
      <div>
        <div class="modal-title" id="visit-modal-title">Add Visit</div>
        <div class="modal-subtitle" id="visit-modal-subtitle"></div>
      </div>
      <button class="modal-close" id="visit-modal-close">✕</button>
    </div>
    <div class="modal-body">
      <div class="field-group" style="display:flex;gap:12px;">
        <div style="flex:1;">
          <div class="field-label">Date</div>
          <input class="field-input" id="visit-date" placeholder="e.g. March 2026" />
        </div>
        <div style="flex:1;">
          <div class="field-label">Days</div>
          <input class="field-input" id="visit-days" type="number" min="1" placeholder="e.g. 1" />
        </div>
      </div>
      <div class="field-group">
        <div class="field-label">Notes</div>
        <textarea class="field-textarea" id="visit-notes" placeholder="Conditions, highlights, what stood out…"></textarea>
        <div class="field-hint">Each line will become a separate note bullet.</div>
      </div>
      <div class="field-group">
        <div class="field-label">Update Rank <span style="font-weight:400;text-transform:none;letter-spacing:0;color:var(--muted);font-size:11px;">(optional — leave blank to keep current)</span></div>
        <input class="field-input" id="visit-rank" type="number" min="1" placeholder="e.g. 3" />
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn-cancel" id="visit-cancel">Cancel</button>
      <button class="btn-save" id="visit-save">Add Visit</button>
    </div>
  </div>
</div>

<!-- Edit Visit Modal -->

<!-- Edit Visit Modal -->
<div class="modal-overlay" id="edit-visit-modal">
  <div class="modal">
    <div class="modal-header">
      <div>
        <div class="modal-title">Edit Visit Date</div>
        <div class="modal-subtitle" id="edit-visit-subtitle"></div>
      </div>
      <button class="modal-close" id="edit-visit-modal-close">✕</button>
    </div>
    <div class="modal-body">
      <div class="field-group" style="display:flex;gap:12px;">
        <div style="flex:1;">
          <div class="field-label">Date</div>
          <input class="field-input" id="edit-visit-date" placeholder="e.g. March 2026" />
        </div>
        <div style="flex:1;">
          <div class="field-label">Days</div>
          <input class="field-input" id="edit-visit-days" type="number" min="1" placeholder="e.g. 1" />
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn-cancel" id="edit-visit-cancel">Cancel</button>
      <button class="btn-save" id="edit-visit-save">Save</button>
    </div>
  </div>
</div>

<!-- Edit Resort Modal -->
<div class="modal-overlay" id="edit-modal">
  <div class="modal">
    <div class="modal-header">
      <div>
        <div class="modal-title">Edit Resort</div>
        <div class="modal-subtitle" id="edit-modal-subtitle"></div>
      </div>
      <button class="modal-close" id="edit-modal-close">✕</button>
    </div>
    <div class="modal-body">
      <div class="field-group">
        <div class="field-label">Resort Name</div>
        <input class="field-input" id="edit-name-input" placeholder="Resort name" />
      </div>
    </div>
    <div class="modal-footer" style="justify-content:space-between;">
      <button class="btn-cancel" id="edit-delete" style="color:var(--accent);border-color:rgba(224,92,42,0.3);">Delete Resort</button>
      <div style="display:flex;gap:8px;">
        <button class="btn-cancel" id="edit-cancel">Cancel</button>
        <button class="btn-save" id="edit-save">Save</button>
      </div>
    </div>
  </div>
</div>

<!-- New Resort Modal -->
<div class="modal-overlay" id="resort-modal">
  <div class="modal">
    <div class="modal-header">
      <div>
        <div class="modal-title">New Resort</div>
        <div class="modal-subtitle">Added to the active tab</div>
      </div>
      <button class="modal-close" id="resort-modal-close">✕</button>
    </div>
    <div class="modal-body">
      <div class="field-group">
        <div class="field-label">Resort Name</div>
        <input class="field-input" id="resort-name-input" placeholder="e.g. Mad River Glen" />
      </div>
      <div class="field-group" style="display:flex;gap:12px;">
        <div style="flex:1;">
          <div class="field-label">Date</div>
          <input class="field-input" id="resort-date-input" placeholder="e.g. March 2026" />
        </div>
        <div style="flex:1;">
          <div class="field-label">Days</div>
          <input class="field-input" id="resort-days-input" type="number" min="1" placeholder="e.g. 1" />
        </div>
      </div>
      <div class="field-group">
        <div class="field-label">Notes</div>
        <textarea class="field-textarea" id="resort-notes-input" placeholder="Conditions, highlights, what stood out…"></textarea>
        <div class="field-hint">Each line will become a separate note bullet.</div>
      </div>
      <div class="field-group">
        <div class="field-label">Rank <span style="font-weight:400;text-transform:none;letter-spacing:0;color:var(--muted);font-size:11px;">(optional — leave blank to add at bottom)</span></div>
        <input class="field-input" id="resort-rank-input" type="number" min="1" placeholder="e.g. 3" />
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn-cancel" id="resort-cancel">Cancel</button>
      <button class="btn-save" id="resort-save">Add Resort</button>
    </div>
  </div>
</div>

<script>
  const BIN_ID  = '699871f1ae596e708f3a542e';
  const API_KEY = '$2a$10$8QkRFjrZ/xlhurcr6itn2OmILf4WvAOJL.asFOI73CEK90.vUoC0G';
  const BIN_URL = `https://api.jsonbin.io/v3/b/${BIN_ID}`;

  const REGIONS = ['east', 'midwest', 'west'];
  let activeRegion = 'east';

  // ── Tab switching ─────────────────────────────────────────
  document.querySelectorAll('.tab-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      activeRegion = btn.dataset.tab;
      document.querySelectorAll('.tab-btn').forEach(b => b.classList.toggle('active', b === btn));
      document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
      document.getElementById(`tab-${activeRegion}`).classList.add('active');
      updateStats();
    });
  });

  function currentGrid() {
    return document.getElementById(`resort-grid-${activeRegion}`);
  }

  // ── Save indicator ────────────────────────────────────────
  const saveIndicator = document.createElement('div');
  saveIndicator.id = 'save-indicator';
  saveIndicator.style.cssText = `
    position: fixed; bottom: 32px; left: 32px; z-index: 100;
    font-family: 'DM Sans', sans-serif; font-size: 12px; font-weight: 500;
    color: #fff; background: #2e8b57; border-radius: 20px;
    padding: 7px 14px; opacity: 0; transition: opacity 0.3s ease;
    pointer-events: none;
  `;
  document.body.appendChild(saveIndicator);

  function showSaved(msg) {
    saveIndicator.textContent = msg;
    saveIndicator.style.opacity = '1';
    setTimeout(() => saveIndicator.style.opacity = '0', 2000);
  }
  function showSaving() {
    saveIndicator.style.background = '#1e5fa3';
    saveIndicator.textContent = '↑ Saving…';
    saveIndicator.style.opacity = '1';
  }

  // ── Serialize ─────────────────────────────────────────────
  function readGrid(grid) {
    return Array.from(grid.querySelectorAll('.resort')).map(card => {
      const name = card.querySelector('.resort-name').textContent.trim();
      const returnVal = card.dataset.return || 'yes';
      const badgeEl = card.querySelector('.badge');
      const badge = badgeEl ? { text: badgeEl.textContent.trim(), cls: badgeEl.className } : null;
      const visits = Array.from(card.querySelectorAll('.visit')).map(v => ({
        date: v.querySelector('.visit-date') ? v.querySelector('.visit-date').textContent.trim() : '',
        notes: Array.from(v.querySelectorAll('.note')).map(n => ({
          text: n.textContent.trim(),
          cls: n.className
        }))
      }));
      return { name, returnVal, badge, visits };
    });
  }

  function readAllData() {
    return {
      east:    readGrid(document.getElementById('resort-grid-east')),
      midwest: readGrid(document.getElementById('resort-grid-midwest')),
      west:    readGrid(document.getElementById('resort-grid-west'))
    };
  }

  // ── Save to JSONBin ───────────────────────────────────────
  let saveTimeout = null;
  function save() {
    clearTimeout(saveTimeout);
    showSaving();
    saveTimeout = setTimeout(async () => {
      try {
        const res = await fetch(BIN_URL, {
          method: 'PUT',
          headers: { 'Content-Type': 'application/json', 'X-Master-Key': API_KEY },
          body: JSON.stringify({ resorts: readAllData() })
        });
        if (res.ok) { saveIndicator.style.background = '#2e8b57'; showSaved('✓ Saved'); }
        else { saveIndicator.style.background = '#e05c2a'; showSaved('Save failed'); }
      } catch(e) { saveIndicator.style.background = '#e05c2a'; showSaved('Offline — not saved'); }
    }, 800);
  }

  // ── Load from JSONBin ─────────────────────────────────────
  async function loadCloud() {
    try {
      const res = await fetch(`${BIN_URL}/latest`, {
        headers: { 'X-Master-Key': API_KEY }
      });
      if (!res.ok) return null;
      const json = await res.json();
      const r = json.record?.resorts;
      if (r && !Array.isArray(r)) return r;
      if (Array.isArray(r) && r.length > 0) return { east: r, midwest: [], west: [] };
      return null;
    } catch(e) { return null; }
  }

  // ── Build a card from data ────────────────────────────────
  function buildCard(resort) {
    const card = document.createElement('div');
    card.className = 'resort';
    card.dataset.return = resort.returnVal || 'yes';
    card.dataset.visits = resort.visits.length;
    const badgeHTML = resort.badge
      ? `<span class="${resort.badge.cls}">${resort.badge.text}</span>` : '';
    const visitCount = resort.visits.length;
    const visitsHTML = resort.visits.map(v => {
      const notesHTML = v.notes.map(n => `<div class="${n.cls}">${n.text}</div>`).join('');
      return `<div class="visit"><div class="visit-date-row"><div class="visit-date">${v.date}</div><div class="notes">${notesHTML}</div></div>`;
    }).join('');
    card.innerHTML = `
      <div class="resort-header">
        <div class="resort-name">${resort.name}</div>
        <button class="edit-resort-btn" title="Edit resort">✎</button>
      <div class="resort-meta">
          <div class="visit-count">${visitCount} ${visitCount === 1 ? 'visit' : 'visits'}</div>
          ${badgeHTML}
        </div>
      </div>
      <div class="visits">${visitsHTML}</div>
      <button class="add-visit-btn">＋ Add visit</button>
    `;
    return card;
  }

  function renderGrid(grid, data) {
    grid.innerHTML = '';
    data.forEach(resort => {
      const card = buildCard(resort);
      grid.appendChild(card);
      addRankBadge(card);
      enableRankEdit(card);
      card.querySelector('.add-visit-btn').addEventListener('click', e => {
        e.stopPropagation();
        openVisitModal(card);
      });
    });
    updateRanks(grid);
  }

  // ── Rank numbers ──────────────────────────────────────────
  function updateRanks(grid) {
    if (!grid) {
      REGIONS.forEach(r => updateRanks(document.getElementById(`resort-grid-${r}`)));
      return;
    }
    Array.from(grid.querySelectorAll('.resort')).forEach((r, i) => {
      const el = r.querySelector('.rank-num');
      if (el) el.textContent = i + 1;
    });
    updateStats();
  }

  function addRankBadge(card) {
    const nameDiv = card.querySelector('.resort-name');
    if (!nameDiv || nameDiv.parentElement.classList.contains('resort-name-row')) return;
    const rankEl = document.createElement('div');
    rankEl.className = 'rank-num';
    const row = document.createElement('div');
    row.className = 'resort-name-row';
    nameDiv.parentNode.insertBefore(row, nameDiv);
    row.appendChild(rankEl);
    row.appendChild(nameDiv);
  }

  // ── Stats ─────────────────────────────────────────────────
  function updateStats() {
    let totalResorts = 0, totalVisits = 0;
    REGIONS.forEach(r => {
      const g = document.getElementById(`resort-grid-${r}`);
      Array.from(g.querySelectorAll('.resort')).forEach(card => {
        totalResorts++;
        totalVisits += card.querySelectorAll('.visit').length;
      });
    });
    document.getElementById('resort-count').textContent = totalResorts;
    document.getElementById('days-count').textContent = totalVisits;

    const tabCountEl = document.getElementById('tab-resort-count');
    if (tabCountEl) {
      tabCountEl.textContent = document.getElementById(`resort-grid-${activeRegion}`)
        .querySelectorAll('.resort').length;
    }
  }

  // ── Bootstrap ─────────────────────────────────────────────
  function wireCard(card) {
    addRankBadge(card);
    enableRankEdit(card);
    card.querySelector('.add-visit-btn').addEventListener('click', e => {
      e.stopPropagation();
      openVisitModal(card);
    });
  }



  // Step 1: Always wire up baked-in HTML as the source of truth
  REGIONS.forEach(r => {
    const g = document.getElementById(`resort-grid-${r}`);
    Array.from(g.querySelectorAll('.resort')).forEach(wireCard);
    updateRanks(g);
  });
  updateStats();

  // Step 2: Check cloud — only use cloud data for a region if it has >= as many
  // resorts as the HTML (meaning user has made changes/additions). 
  // If cloud has fewer, the HTML is newer — push it up.
  (async () => {
    const cloudData = await loadCloud();
    let needsResave = false;

    if (cloudData) {
      REGIONS.forEach(r => {
        const htmlResorts = Array.from(
          document.getElementById(`resort-grid-${r}`).querySelectorAll('.resort')
        ).length;
        const cloudResorts = (cloudData[r] || []).length;

        if (cloudResorts >= htmlResorts && cloudResorts > 0) {
          // Cloud is up to date or has user additions — use it
          renderGrid(document.getElementById(`resort-grid-${r}`), cloudData[r]);
        } else {
          // HTML has more resorts than cloud — HTML is the newer source
          needsResave = true;
        }
      });
    } else {
      needsResave = true;
    }

    if (needsResave) save();
    updateStats();
  })();

  // ── Click-to-edit rank numbers ────────────────────────────
  function enableRankEdit(card) {
    // Rank is now display-only; changed via the Add Visit modal
  }

  // ── Visit count helper ────────────────────────────────────
  function refreshVisitCount(card) {
    const count = card.querySelectorAll('.visit').length;
    const vc = card.querySelector('.visit-count');
    if (vc) vc.textContent = count + (count === 1 ? ' visit' : ' visits');
    card.dataset.visits = count;
  }

  // ── Add Visit modal ───────────────────────────────────────
  const visitModal    = document.getElementById('visit-modal');
  const visitTitle    = document.getElementById('visit-modal-title');
  const visitSubtitle = document.getElementById('visit-modal-subtitle');
  const visitDateIn   = document.getElementById('visit-date');
  const visitNotesIn  = document.getElementById('visit-notes');
  let targetCard = null;

  function openVisitModal(card) {
    targetCard = card;
    visitTitle.textContent = 'Add Visit';
    visitSubtitle.textContent = card.querySelector('.resort-name').textContent;
    visitDateIn.value = '';
    visitNotesIn.value = '';
    document.getElementById('visit-rank').value = '';
    document.getElementById('visit-days').value = '';
    const currentRank = card.querySelector('.rank-num') ? card.querySelector('.rank-num').textContent.trim() : '';
    document.getElementById('visit-rank').placeholder = `Current rank: ${currentRank}`;
    visitModal.classList.add('open');
    visitDateIn.focus();
  }

  function closeVisitModal() { visitModal.classList.remove('open'); targetCard = null; }

  document.getElementById('visit-modal-close').addEventListener('click', closeVisitModal);
  document.getElementById('visit-cancel').addEventListener('click', closeVisitModal);
  visitModal.addEventListener('click', e => { if (e.target === visitModal) closeVisitModal(); });

  document.getElementById('visit-save').addEventListener('click', () => {
    if (!targetCard) return;
    const dateVal  = visitDateIn.value.trim();
    const notesVal = visitNotesIn.value.trim();
    const rankVal  = parseInt(document.getElementById('visit-rank').value);
    if (!dateVal && !notesVal) { closeVisitModal(); return; }

    // Add the visit
    const visitsContainer = targetCard.querySelector('.visits');
    const visitEl = document.createElement('div');
    visitEl.className = 'visit';
    const dateEl = document.createElement('div');
    dateEl.className = 'visit-date';
    const daysVal = document.getElementById('visit-days').value.trim();
    const dayLabel = daysVal ? `${daysVal} ${parseInt(daysVal) === 1 ? 'Day' : 'Days'}` : '';
    const combined = [dayLabel, dateVal].filter(Boolean).join(' · ');
    dateEl.textContent = combined || 'Date TBD';
    visitEl.appendChild(dateEl);
    const notesEl = document.createElement('div');
    notesEl.className = 'notes';
    notesVal.split('\n').filter(l => l.trim()).forEach((line, i) => {
      const note = document.createElement('div');
      note.className = 'note' + (i === 0 ? ' hl' : '');
      note.textContent = line.trim();
      notesEl.appendChild(note);
    });
    visitEl.appendChild(notesEl);
    visitsContainer.appendChild(visitEl);
    refreshVisitCount(targetCard);

    // Apply new rank if provided
    if (!isNaN(rankVal) && rankVal >= 1) {
      const grid = targetCard.closest('.resort-grid');
      const all = Array.from(grid.querySelectorAll('.resort'));
      const total = all.length;
      const clampedRank = Math.min(rankVal, total);
      grid.removeChild(targetCard);
      const updated = Array.from(grid.querySelectorAll('.resort'));
      if (clampedRank - 1 >= updated.length) grid.appendChild(targetCard);
      else grid.insertBefore(targetCard, updated[clampedRank - 1]);
      updateRanks(grid);
    }

    closeVisitModal();
    save();
  });

  // ── New Resort modal ──────────────────────────────────────
  const resortModal   = document.getElementById('resort-modal');
  const resortNameIn  = document.getElementById('resort-name-input');
  const resortDateIn  = document.getElementById('resort-date-input');
  const resortNotesIn = document.getElementById('resort-notes-input');

  function openResortModal() {
    resortNameIn.value = ''; resortDateIn.value = ''; resortNotesIn.value = '';
    document.getElementById('resort-days-input').value = '';
    document.getElementById('resort-rank-input').value = '';
    resortModal.classList.add('open');
    resortNameIn.focus();
  }

  function closeResortModal() { resortModal.classList.remove('open'); }

  document.getElementById('new-resort-btn').addEventListener('click', openResortModal);
  document.getElementById('resort-modal-close').addEventListener('click', closeResortModal);
  document.getElementById('resort-cancel').addEventListener('click', closeResortModal);
  resortModal.addEventListener('click', e => { if (e.target === resortModal) closeResortModal(); });

  document.getElementById('resort-save').addEventListener('click', () => {
    const name = resortNameIn.value.trim();
    if (!name) { resortNameIn.focus(); return; }
    const dateVal  = resortDateIn.value.trim();
    const daysVal  = document.getElementById('resort-days-input').value.trim();
    const rankVal  = parseInt(document.getElementById('resort-rank-input').value);
    const dayLabel = daysVal ? daysVal + ' ' + (parseInt(daysVal) === 1 ? 'Day' : 'Days') : '';
    const combined = [dayLabel, dateVal].filter(Boolean).join(' · ');
    const notes    = resortNotesIn.value.trim();
    const lines    = notes.split('\n').filter(l => l.trim());
    const notesHTML = lines.map((line, i) =>
      `<div class="note${i === 0 ? ' hl' : ''}">${line.trim()}</div>`
    ).join('');

    const card = document.createElement('div');
    card.className = 'resort';
    card.dataset.return = 'yes';
    card.dataset.visits = '1';
    card.innerHTML = `
      <div class="resort-header">
        <button class="edit-resort-btn" title="Edit resort">✎</button>
        <div class="resort-name">${name}</div>
        <div class="resort-meta"><div class="visit-count">1 visit</div></div>
      </div>
      <div class="visits"><div class="visit">
        <div class="visit-date-row"><div class="visit-date">${combined || 'Date TBD'}</div><button class="edit-visit-btn" title="Edit date">✎</button></div>
        <div class="notes">${notesHTML || '<div class="note hl">No notes yet.</div>'}</div>
      </div></div>
      <button class="add-visit-btn">＋ Add visit</button>
    `;

    const grid = currentGrid();
    // Always append first, then reposition if rank given
    grid.appendChild(card);
    addRankBadge(card);
    enableRankEdit(card);

    if (!isNaN(rankVal) && rankVal >= 1) {
      grid.removeChild(card);
      const existing = Array.from(grid.querySelectorAll('.resort'));
      const pos = Math.min(rankVal - 1, existing.length);
      if (pos >= existing.length) {
        grid.appendChild(card);
      } else {
        grid.insertBefore(card, existing[pos]);
      }
    }

    updateRanks(grid);
    card.querySelector('.add-visit-btn').addEventListener('click', e => {
      e.stopPropagation();
      openVisitModal(card);
    });
    closeResortModal();
    save();
    card.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
  });

  // ── Export ────────────────────────────────────────────────
  document.getElementById('export-btn').addEventListener('click', () => {
    const data = readAllData();
    const json = JSON.stringify({ resorts: data }, null, 2);
    const blob = new Blob([json], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'ski-rankings.json';
    a.click();
    URL.revokeObjectURL(url);
  });

  // ── Edit Resort modal ─────────────────────────────────────
  const editModal = document.getElementById('edit-modal');
  const editNameIn = document.getElementById('edit-name-input');
  let editTargetCard = null;

  function openEditModal(card) {
    editTargetCard = card;
    editNameIn.value = card.querySelector('.resort-name').textContent.trim();
    document.getElementById('edit-modal-subtitle').textContent = '';
    editModal.classList.add('open');
    editNameIn.focus();
    editNameIn.select();
  }

  function closeEditModal() { editModal.classList.remove('open'); editTargetCard = null; }

  document.getElementById('edit-modal-close').addEventListener('click', closeEditModal);
  document.getElementById('edit-cancel').addEventListener('click', closeEditModal);
  editModal.addEventListener('click', e => { if (e.target === editModal) closeEditModal(); });

  document.getElementById('edit-delete').addEventListener('click', () => {
    if (!editTargetCard) return;
    const card = editTargetCard; // capture before closeEditModal clears it
    const grid = card.closest('.resort-grid');
    closeEditModal();
    card.remove();
    updateRanks(grid);
    save();
  });

  document.getElementById('edit-save').addEventListener('click', () => {
    if (!editTargetCard) return;
    const newName = editNameIn.value.trim();
    if (!newName) { editNameIn.focus(); return; }
    editTargetCard.querySelector('.resort-name').textContent = newName;
    closeEditModal();
    save();
  });

  // Event delegation for edit button
  document.addEventListener('click', e => {
    const btn = e.target.closest('.edit-resort-btn');
    if (!btn) return;
    const card = btn.closest('.resort');
    if (card) openEditModal(card);
  });

  // ── Edit Visit Date ───────────────────────────────────────
  const editVisitModal = document.getElementById('edit-visit-modal');
  const editVisitDate  = document.getElementById('edit-visit-date');
  const editVisitDays  = document.getElementById('edit-visit-days');
  let editTargetVisit  = null;

  function openEditVisitModal(visitEl) {
    editTargetVisit = visitEl;
    const card = visitEl.closest('.resort');
    document.getElementById('edit-visit-subtitle').textContent =
      card ? card.querySelector('.resort-name').textContent.trim() : '';

    // Parse existing date text e.g. "2 Days · March 2026"
    const dateText = visitEl.querySelector('.visit-date').textContent.trim();
    const parts = dateText.split('·').map(s => s.trim());
    if (parts.length === 2) {
      // First part is days, second is date
      const daysMatch = parts[0].match(/\d+/);
      editVisitDays.value = daysMatch ? daysMatch[0] : '';
      editVisitDate.value = parts[1];
    } else {
      editVisitDays.value = '';
      editVisitDate.value = dateText;
    }

    editVisitModal.classList.add('open');
    editVisitDate.focus();
  }

  function closeEditVisitModal() { editVisitModal.classList.remove('open'); editTargetVisit = null; }

  document.getElementById('edit-visit-modal-close').addEventListener('click', closeEditVisitModal);
  document.getElementById('edit-visit-cancel').addEventListener('click', closeEditVisitModal);
  editVisitModal.addEventListener('click', e => { if (e.target === editVisitModal) closeEditVisitModal(); });

  document.getElementById('edit-visit-save').addEventListener('click', () => {
    if (!editTargetVisit) return;
    const dateVal = editVisitDate.value.trim();
    const daysVal = editVisitDays.value.trim();
    const dayLabel = daysVal ? daysVal + ' ' + (parseInt(daysVal) === 1 ? 'Day' : 'Days') : '';
    const combined = [dayLabel, dateVal].filter(Boolean).join(' · ');
    editTargetVisit.querySelector('.visit-date').textContent = combined || 'Date TBD';
    closeEditVisitModal();
    save();
  });

  // Event delegation for visit edit button
  document.addEventListener('click', e => {
    const btn = e.target.closest('.edit-visit-btn');
    if (!btn) return;
    const visitEl = btn.closest('.visit');
    if (visitEl) openEditVisitModal(visitEl);
  });
</script>
</body>
</html>
